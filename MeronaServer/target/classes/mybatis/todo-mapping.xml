<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mybatis.TodoMapper">
	<select id="getTodoList" parameterType="todos" resultType="todos">
		<![CDATA[
			SELECT * FROM TODOS
		]]>
	</select>
	
	<insert id="insertItem" parameterType="todos">
		<![CDATA[
			INSERT INTO TODOS(TODO_ID, CONTENT, MEMO, DUEDATE, DUETIME, SHARE_WITH, IMPORTANCE, WRITER_ID, ADDR_ID, DONE) VALUES
			(TODO_SEQ.NEXTVAL, #{content}, #{memo}, #{duedate}, #{duetime}, #{share_with}, #{importance}, #{writer_id}, 
			(SELECT MAX(ADDR_ID) FROM ADDRESS), #{done})
		]]>
	</insert>
	
	<insert id="insertAddress" parameterType="address">
		<![CDATA[
			INSERT INTO ADDRESS(ADDR_ID, ADDRESS_NAME, PLACE_NAME, ROAD_ADDRESS_NAME, CATEGORY_NAME, LAT, LNG) VALUES
			(ADDR_SEQ.NEXTVAL, #{address_name}, #{place_name}, #{road_address_name}, #{category_name}, #{lat}, #{lng})
		]]>
	</insert>

	
	<update id="updateByCheckbox" parameterType="todos">
		<![CDATA[
			UPDATE TODOS SET DONE=#{done} WHERE TODO_ID=#{todo_id}
		]]>
	</update>
	
	<update id="editItem" parameterType="todos">
		<![CDATA[
			UPDATE TODOS SET CONTENT=#{content}, DONE=#{done} WHERE TODO_ID=#{todo_id}
		]]>
	</update>
	
	<delete id="deleteItem" parameterType="todos">
		<![CDATA[
			DELETE FROM TODOS WHERE TODO_ID=#{todo_id}
		]]>
	</delete>
	
</mapper>